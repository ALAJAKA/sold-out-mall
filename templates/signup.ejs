<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>다8고양</title>
    <link rel="stylesheet" href="/css/signup.css"/>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  </head>
  <body>
  <h1 style="text-align: center">Logo</h1>



  <div class="signup-form">
    <form
      action="/signup"
      id="signup-form"
      method="post"
      onsubmit="return validateForm()"
    >
      <div class="form-group">
        <input
          type="email"
          class="form-control"
          name="email"
          id="email"
          placeholder="Enter your email."
          required
        />
      </div>
      <div class="form-group">
        <input
          type="password"
          class="form-control"
          name="password"
          id="password"
          placeholder="Enter your password."
          required
        />
      </div>
      <div class="form-group">
        <input
          type="password"
          class="form-control"
          name="confirmPw"
          id="confirmPw"
          placeholder="Confirm your password."
          required
        />
      </div>
      <div class="form-group">
        <input
          type="text"
          class="form-control"
          name="name"
          id="name"
          placeholder="Enter your name."
          required
        />
      </div>


        <div class="form-group">
          <input
            type="tel"
            class="form-control"
            name="phone"
            id="phone"
            placeholder="Enter your phone number."
            pattern="[0-9]{3}-[0-9]{4}-[0-9]{4}"
            title="전화번호 형식에 맞춰주세요. 예시 (010-4562-7890)"
            required
          />
        </div>

        <div class="form-group">
          <input
            type="text"
            class="form-control"
            name="address"
            id="address"
            placeholder="Enter your address."
            required
          />
        </div>


        
        <button type="submit" class="btn">회원가입</button>
      </form>
    </div>



    <script>
      document.addEventListener("DOMContentLoaded", function(event) {
        document.getElementById("signup-form").addEventListener("submit", function(e) {
          e.preventDefault();
    
          // get the form data
          var formData = {
            email: document.getElementById("email").value,
            password: document.getElementById("password").value,
            confirmPw: document.getElementById("confirmPw").value,
            name: document.getElementById("name").value,
            phone: document.getElementById("phone").value,
            address: document.getElementById("address").value
          };
    
          console.log(formData);
          
          // send the POST request
          axios.post('/signup', formData)
            .then(function (response) {
              console.log(response);
              alert('회원가입이 완료되었습니다!');
              window.location = '/api';
            })
            .catch(function (error) {
              console.log(error.response);
              if (error.response.status === 400) {
                window.alert(error.response.data.message);
              }
            });
        });
      });
    </script>
    
    
    
  </body>
</html>
